# RCSB PDB ChatBot - Universal Environment Configuration
# Copy this file to .env and configure for your environment

# === Application Server Configuration ===
# Port where the application will run (accessible via browser)
APP_PORT=8501
# Host address (0.0.0.0 for external access, 127.0.0.1 for local only)  
APP_HOST=0.0.0.0

# === RAGFlow Integration - Required ===
# Get your API key from RAGFlow dashboard: Settings > API Keys
RAGFLOW_API_KEY=your-ragflow-api-key-here
# URL of your RAGFlow server (adjust IP/port as needed)
RAGFLOW_BASE_URL=http://127.0.0.1:9380
# Name of your RAGFlow assistant
RAGFLOW_ASSISTANT_NAME=RCSB ChatBot v2

# === OpenAI Integration - Required for Knowledge Base ===
# Get your API key from OpenAI dashboard: https://platform.openai.com/api-keys
OPENAI_API_KEY=your-openai-api-key-here

# === RAGFlow Chat Assistant Configuration ===
# Dataset name for knowledge base (should match initialize_dataset.py)
RAGFLOW_DATASET_NAME=rcsb_pdb_knowledge_base
# LLM model to use for chat assistant
RAGFLOW_MODEL_NAME=gpt-4-turbo
# Temperature for response creativity (0.0-1.0)
RAGFLOW_TEMPERATURE=0.1
# Top-p for nucleus sampling (0.0-1.0)
RAGFLOW_TOP_P=0.3
# Presence penalty to avoid repetition (-2.0 to 2.0)
RAGFLOW_PRESENCE_PENALTY=0.2
# Frequency penalty to reduce repeated phrases (-2.0 to 2.0)
RAGFLOW_FREQUENCY_PENALTY=0.7
# Similarity threshold for chunk retrieval (0.0-1.0)
RAGFLOW_SIMILARITY_THRESHOLD=0.2
# Weight of keyword similarity vs vector similarity (0.0-1.0)
RAGFLOW_KEYWORDS_WEIGHT=0.7
# Number of top chunks to send to LLM
RAGFLOW_TOP_N=8
# Number of chunks for initial retrieval
RAGFLOW_TOP_K=1024
# Opening greeting message
RAGFLOW_OPENER=Hi! I'm your RCSB PDB assistant. I can help you with protein structures, crystallography, and structural biology questions. What would you like to know?
# Show source quotes in responses (true/false)
RAGFLOW_SHOW_QUOTE=true

# === Custom System Prompt ===
# Override the default system prompt (optional - leave empty to use default)
# For multi-line prompts, use \n for line breaks
RAGFLOW_SYSTEM_PROMPT=

# === Data Storage Configuration ===
# Directory for storing user session data (relative or absolute path)
USER_DATA_DIR=./user_data

# === Application Behavior ===
# Enable debug mode for development (shows Advanced Settings)
DEBUG_MODE=false
# Show configuration metrics (Temperature, Top-P, etc.) in Advanced Settings
SHOW_CONFIG_METRICS=false
# Show system prompt editor in Advanced Settings
SHOW_PROMPT_EDITOR=false
# Logging level (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# === Google Drive Integration - Optional ===
# Google Drive folder URL containing the spreadsheet with document links
GOOGLE_DRIVE_FOLDER_URL=https://drive.google.com/drive/folders/YOUR_FOLDER_ID
# Path to Google OAuth credentials JSON - relative to project root (K8s-friendly)
# Default: credentials/google_drive_credentials.json
GOOGLE_DRIVE_CREDENTIALS_PATH=credentials/google_drive_credentials.json
# Path to store OAuth token - relative to project root (auto-generated after first auth)
# Default: credentials/google_drive_token.pickle
GOOGLE_DRIVE_TOKEN_PATH=credentials/google_drive_token.pickle
# Sync interval in seconds (3600 = 1 hour)
GOOGLE_DRIVE_SYNC_INTERVAL=3600
# Maximum file size to download in MB
GOOGLE_DRIVE_MAX_FILE_SIZE_MB=100
# Download timeout in seconds
GOOGLE_DRIVE_DOWNLOAD_TIMEOUT=300
# Enable email notifications for sync failures (true/false)
GOOGLE_DRIVE_ENABLE_NOTIFICATIONS=false

# === Feedback Export - Optional ===
# Export user conversations (Q&A, feedback, ratings) to Google Drive as CSV
# Optional: Google Drive folder ID where CSV should be uploaded (leave empty for root)
GOOGLE_DRIVE_EXPORT_FOLDER_ID=
# Optional: Custom filename (leave empty for auto-generated timestamp filename)
FEEDBACK_EXPORT_FILENAME=
# Directory to save CSV files locally before upload (relative to project root)
FEEDBACK_EXPORT_DIR=exports

# === Universal Setup ===
# 1. Clone repo: git clone <repo-url>
# 2. Copy config: cp .env.example .env  
# 3. Edit this file: nano .env
# 4. Start app: docker-compose up -d
# 5. Access: http://localhost:8501 (or your configured APP_PORT)